{"forms":[{"title":"Add EAO Staff","display":"form","type":"form","name":"staff","path":"staff","tags":["common"],"components":[{"title":"Staff","theme":"default","tooltip":"","customClass":"","collapsible":false,"hidden":false,"hideLabel":false,"disabled":false,"modalEdit":false,"key":"panel","tags":[],"properties":{},"customConditional":"","conditional":{"json":"","show":null,"when":null,"eq":""},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"panel","label":"Panel","breadcrumb":"default","tabindex":"","input":false,"tableView":false,"components":[{"label":"Columns","columns":[{"components":[{"label":"First Name","labelPosition":"left-left","placeholder":"","description":"","tooltip":"","prefix":"","suffix":"","widget":{"type":"input"},"inputMask":"","displayMask":"","allowMultipleMasks":false,"customClass":"","tabindex":"","autocomplete":"","hidden":false,"hideLabel":false,"showWordCount":false,"showCharCount":false,"mask":false,"autofocus":false,"spellcheck":true,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"persistent":true,"inputFormat":"plain","protected":false,"dbIndex":false,"case":"","truncateMultipleSpaces":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":true,"pattern":"","customMessage":"","custom":"valid = data.validations.staff_exists === true?'Staff with given name already exists'  : true ","customPrivate":false,"json":"","minLength":"","maxLength":100,"strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","errors":"","key":"staffs.first_name","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[{"name":"firstNameChangeLogic","trigger":{"type":"event","event":"change"},"actions":[{"name":"firstNameChangeAction","type":"customAction","customAction":"var object = result[1];\nif(object?.changed?.component?.key === 'staffs.first_name') {\n  instance.emit('staffNameChanged',{});\n}\n\n "}]},{"name":"staffNameChangedLogic","trigger":{"type":"event","event":"staffNameChanged"},"actions":[{"name":"staffNameChangedAction","type":"customAction","customAction":"\nvalidate(data);\nfunction validate(data) {\n  if(data.staffs.first_name !== '' && data.staffs.last_name !== '') {\n    var headers = {\n    headers: {\n    Authorization: 'Bearer '+localStorage.getItem('authToken')\n    }\n  }\n\n  var url = localStorage.getItem('customApiUrl').split(',')[0];\n  \n  fetch(\n    url+'staffs/exists?first_name='+data.staffs.first_name+'&last_name='+data.staffs.last_name+getIdParameter(),headers\n    )\n    .then(response=>response.json())\n    .then(res=>callback(data,res));\n}\nfunction callback(data,res) {\n  data.validations = data.validations || {};\n  data.validations.staff_exists = res.exists;\n}\nfunction getIdParameter() {\n  if(data.staffs.id !== '') {\n    return '&id='+data.staffs.id;\n  }\n  return '';\n}\n} "}]}],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"textfield","input":true,"refreshOn":"","dataGridLabel":false,"addons":[],"inputType":"text","id":"eagdsqt","defaultValue":""}],"width":6,"offset":0,"push":0,"pull":0,"size":"md","currentWidth":6},{"components":[{"label":"Last Name","labelPosition":"left-left","placeholder":"","description":"","tooltip":"","prefix":"","suffix":"","widget":{"type":"input"},"inputMask":"","displayMask":"","allowMultipleMasks":false,"customClass":"","tabindex":"","autocomplete":"","hidden":false,"hideLabel":false,"showWordCount":false,"showCharCount":false,"mask":false,"autofocus":false,"spellcheck":true,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"persistent":true,"inputFormat":"plain","protected":false,"dbIndex":false,"case":"","truncateMultipleSpaces":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":true,"pattern":"","customMessage":"","custom":"","customPrivate":false,"json":"","minLength":"","maxLength":100,"strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","errors":"","key":"staffs.last_name","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[{"name":"lastNameChangeLogic","trigger":{"type":"event","event":"change"},"actions":[{"name":"lastNameChangeAction","type":"customAction","customAction":"console.log(submission);\nvar object = result[1];\nif(object?.changed?.component?.key === 'staffs.last_name') {\n  instance.emit('staffNameChanged',{});\n}\n "}]}],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"textfield","input":true,"refreshOn":"","dataGridLabel":false,"addons":[],"inputType":"text","id":"ej6lyy","defaultValue":""}],"width":6,"offset":0,"push":0,"pull":0,"size":"md","currentWidth":6},{"components":[{"label":"Email","labelPosition":"left-left","tableView":true,"validate":{"required":true,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"key":"staffs.email","type":"email","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"dataGridLabel":false,"description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"addons":[],"mask":false,"inputType":"email","inputFormat":"plain","inputMask":"","displayMask":"","spellcheck":true,"truncateMultipleSpaces":false,"kickbox":{"enabled":false},"id":"ejfpaak"}],"size":"md","width":6,"offset":0,"push":0,"pull":0,"currentWidth":6},{"components":[{"label":"Phone","labelPosition":"left-left","tableView":true,"validate":{"required":true,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"minLength":"","maxLength":"","pattern":""},"key":"staffs.phone","type":"phoneNumber","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"dataGridLabel":false,"description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"addons":[],"mask":false,"inputType":"tel","inputFormat":"plain","inputMask":"(999) 999-9999","displayMask":"","spellcheck":true,"truncateMultipleSpaces":false,"inputMode":"decimal","id":"e6rre5b"}],"size":"md","width":6,"offset":0,"push":0,"pull":0,"currentWidth":6},{"components":[{"label":"Position","labelPosition":"left-left","widget":"choicesjs","tableView":true,"dataSrc":"url","data":{"url":"{{localStorage.getItem('customApiUrl')}}codes/positions","headers":[{"key":"Authorization","value":"Bearer {{localStorage.getItem('authToken')}}"}],"values":[{"label":"","value":""}],"json":"","resource":"","custom":""},"valueProperty":"id","template":"<span>{{ item.name }}</span>","validate":{"required":true,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false,"onlyAvailableItems":false},"key":"staffs.position_id","type":"select","selectValues":"codes","disableLimit":false,"input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"dataGridLabel":false,"description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"attributes":{},"validateOn":"change","conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"addons":[],"idPath":"id","clearOnRefresh":false,"limit":100,"lazyLoad":true,"filter":"","searchEnabled":true,"searchDebounce":0.3,"searchField":"","minSearch":0,"readOnlyValue":false,"authenticate":false,"ignoreCache":false,"selectFields":"","selectThreshold":0.3,"uniqueOptions":false,"fuseOptions":{"include":"score","threshold":0.3},"indexeddb":{"filter":{}},"customOptions":{},"useExactSearch":false,"id":"essg8jo"}],"size":"md","width":6,"offset":0,"push":0,"pull":0,"currentWidth":6},{"components":[{"label":"Active","tableView":false,"defaultValue":true,"key":"staffs.is_active","type":"checkbox","input":true,"placeholder":"","prefix":"","customClass":"","suffix":"","multiple":false,"protected":false,"unique":false,"persistent":true,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"dataGridLabel":true,"labelPosition":"right","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":null,"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"addons":[],"inputType":"checkbox","value":"","name":"","id":"embmvud"}],"size":"md","width":6,"offset":0,"push":0,"pull":0,"currentWidth":6}],"autoAdjust":false,"customClass":"","hidden":false,"hideLabel":false,"modalEdit":false,"key":"columns3","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"columns","input":false,"tableView":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"clearOnHide":false,"refreshOn":"","redrawOn":"","dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":null,"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"tree":false,"lazyLoad":false,"id":"ekv2qt5"},{"label":"Submit","showValidations":false,"customClass":"pull-right","tableView":false,"key":"submit","type":"button","input":true,"saveOnEnter":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"hidden":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","modalEdit":false,"dataGridLabel":true,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"attributes":{},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"overlay":{"style":"","left":"","top":"","width":"","height":""},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"properties":{},"allowMultipleMasks":false,"addons":[],"size":"md","leftIcon":"","rightIcon":"","block":false,"action":"submit","disableOnInvalid":false,"theme":"primary","id":"ewveucv"}],"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"clearOnHide":false,"refreshOn":"","redrawOn":"","dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":null,"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"tree":false,"lazyLoad":false,"id":"es9h4bp"},{"label":"id","customClass":"","modalEdit":false,"defaultValue":null,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"staffs.id","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","tableView":false,"dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"inputType":"hidden","id":"ez4nflr"},{"label":"applicationId","customClass":"","modalEdit":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"applicationId","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","tableView":false,"labelPosition":"top","Description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"inputType":"hidden","id":"em1y8gd","defaultValue":"","dataGridLabel":false,"description":"","addons":[]},{"label":"applicationStatus","customClass":"","modalEdit":false,"defaultValue":null,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"applicationStatus","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"tableView":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","dataGridLabel":false,"labelPosition":"top","Description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"inputType":"hidden","id":"e6z1qd9","description":"","addons":[]}]}]}