{"forms":[{"title":"Add Indigenous Nation","display":"form","type":"form","name":"indigenousNation","path":"indigenousnation","tags":["common"],"components":[{"title":"Indigenous Nation","theme":"default","tooltip":"","customClass":"","collapsible":false,"hidden":false,"hideLabel":true,"disabled":false,"modalEdit":false,"key":"panel","tags":[],"properties":{},"customConditional":"","conditional":{"json":"","show":null,"when":null,"eq":""},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"panel","label":"Panel","breadcrumb":"default","tabindex":"","input":false,"tableView":false,"components":[{"label":"HTML","tag":"div","className":"warning","attrs":[{"attr":"","value":""}],"content":"No Relationship Holder has been assigned\n<style type='text/css'>\n  .warning {\n    border: 1px solid red;\n    padding: 10px;\n    font-weight: bold;\n  }\n</style>","refreshOnChange":false,"customClass":"","hidden":false,"modalEdit":false,"key":"html","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"show = data.indigenous_nations.relationship_holder_id === '' && data.applicationId !== '';","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"htmlelement","input":false,"tableView":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":null,"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"id":"emxj99b"},{"label":"Name","labelPosition":"top","placeholder":"","description":"","tooltip":"","prefix":"","suffix":"","widget":{"type":"input"},"inputMask":"","displayMask":"","allowMultipleMasks":false,"customClass":"","tabindex":"","autocomplete":"","hidden":false,"hideLabel":false,"showWordCount":false,"showCharCount":false,"mask":false,"autofocus":false,"spellcheck":true,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"persistent":true,"inputFormat":"plain","protected":false,"dbIndex":false,"case":"","truncateMultipleSpaces":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":true,"pattern":"","customMessage":"","custom":"valid = data.validations.in_exists === true ? 'Indigenous Nation with the given name already exists':true;","customPrivate":false,"json":"","minLength":"","maxLength":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","errors":"","key":"indigenous_nations.name","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[{"name":"iNChangeLogic","trigger":{"type":"event","event":"change"},"actions":[{"name":"iNChangeAction","type":"customAction","customAction":"console.log(submission);\nvar object = result[1];\nif(object?.changed?.component?.key === 'indigenous_nations.name') {\n  validate(data);\n}\n\nfunction validate(data) {\n  if(data.indigenous_nations.name !== '') {\n    var headers = {\n    headers: {\n    Authorization: 'Bearer '+localStorage.getItem('authToken')\n    }\n  }\n\n  var url = localStorage.getItem('customApiUrl').split(',')[0];\n  \n  fetch(\n    url+'indigenous-nations/exists?name='+data.indigenous_nations.name+getIdParameter(),headers\n    )\n    .then(response=>response.json())\n    .then(res=>callback(data,res));\n}\nfunction callback(data,res) {\n  data.validations = data.validations || {};\n  data.validations.in_exists = res.exists;\n}\nfunction getIdParameter() {\n  if(data.indigenous_nations.id !== '') {\n    return '&id='+data.indigenous_nations.id;\n  }\n  return '';\n}\n} \n "}]}],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"textfield","input":true,"refreshOn":"","dataGridLabel":false,"addons":[],"inputType":"text","id":"e7q6pvr","defaultValue":""},{"label":"Relationship Holder","labelPosition":"top","widget":"choicesjs","placeholder":"","description":"","tooltip":"","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"uniqueOptions":false,"autofocus":false,"disabled":false,"tableView":true,"modalEdit":false,"multiple":false,"dataSrc":"url","data":{"values":[{"label":"","value":""}],"resource":"","json":"","url":"{{localStorage.getItem('customApiUrl')}}staffs?positions=3,4,5","headers":[{"key":"Authorization","value":"Bearer {{localStorage.getItem('authToken')}}"}],"custom":""},"dataType":"","idPath":"id","valueProperty":"id","template":"<span>{{ item.full_name }}</span>","refreshOn":"","refreshOnBlur":"","clearOnRefresh":false,"searchEnabled":true,"selectThreshold":0.3,"readOnlyValue":false,"customOptions":{},"useExactSearch":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validateOn":"change","validate":{"required":false,"onlyAvailableItems":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"unique":false,"errorLabel":"","errors":"","key":"indigenous_nations.relationship_holder_id","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"select","indexeddb":{"filter":{}},"lazyLoad":true,"selectValues":"staffs","selectFields":"","disableLimit":false,"searchField":"","searchDebounce":0.3,"minSearch":0,"filter":"","limit":100,"authenticate":false,"ignoreCache":false,"redrawOn":"","input":true,"prefix":"","suffix":"","dataGridLabel":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"fuseOptions":{"include":"score","threshold":0.3},"id":"ez21kd","defaultValue":"","sort":""},{"label":"Active","description":"","tooltip":"","shortcut":"","inputType":"checkbox","customClass":"","tabindex":"","hidden":false,"hideLabel":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"defaultValue":true,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","clearOnHide":true,"customDefaultValue":"","calculateValue":"","calculateServer":false,"allowCalculateOverride":false,"validate":{"required":false,"customMessage":"","custom":"","customPrivate":false,"json":"","strictDateValidation":false,"multiple":false,"unique":false},"errorLabel":"","errors":"","key":"indigenous_nations.is_active","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"checkbox","name":"","value":"","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"refreshOn":"","dataGridLabel":true,"labelPosition":"right","widget":null,"validateOn":"change","showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"id":"e0xgqo"}],"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"clearOnHide":false,"refreshOn":"","redrawOn":"","dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","autofocus":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":null,"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"tree":false,"lazyLoad":false,"id":"em8c8nb"},{"label":"Submit","action":"submit","showValidations":false,"theme":"primary","size":"md","block":false,"leftIcon":"","rightIcon":"","shortcut":"","description":"","tooltip":"","customClass":"pull-right","tabindex":"","disableOnInvalid":false,"hidden":false,"autofocus":false,"disabled":false,"tableView":false,"modalEdit":false,"key":"submit","tags":[],"properties":{},"conditional":{"show":null,"when":null,"eq":"","json":""},"customConditional":"","logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"button","saveOnEnter":false,"input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"defaultValue":null,"protected":false,"unique":false,"persistent":false,"clearOnHide":true,"refreshOn":"","redrawOn":"","dataGridLabel":true,"labelPosition":"top","errorLabel":"","hideLabel":false,"dbIndex":false,"customDefaultValue":"","calculateValue":"","calculateServer":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"allowCalculateOverride":false,"encrypted":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"id":"esk36y"},{"label":"applicationId","customClass":"","modalEdit":false,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"applicationId","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","tableView":false,"labelPosition":"top","Description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"inputType":"hidden","id":"em1y8gd","defaultValue":"","dataGridLabel":false,"description":"","addons":[]},{"label":"id","customClass":"","modalEdit":false,"defaultValue":null,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"indigenous_nations.id","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"tableView":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","dataGridLabel":false,"labelPosition":"top","description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"addons":[],"inputType":"hidden","id":"ermgyhi"},{"label":"applicationStatus","customClass":"","modalEdit":false,"defaultValue":null,"persistent":true,"protected":false,"dbIndex":false,"encrypted":false,"redrawOn":"","customDefaultValue":"","calculateValue":"","calculateServer":false,"key":"applicationStatus","tags":[],"properties":{},"logic":[],"attributes":{},"overlay":{"style":"","page":"","left":"","top":"","width":"","height":""},"type":"hidden","input":true,"tableView":false,"placeholder":"","prefix":"","suffix":"","multiple":false,"unique":false,"hidden":false,"clearOnHide":true,"refreshOn":"","dataGridLabel":false,"labelPosition":"top","Description":"","errorLabel":"","tooltip":"","hideLabel":false,"tabindex":"","disabled":false,"autofocus":false,"widget":{"type":"input"},"validateOn":"change","validate":{"required":false,"custom":"","customPrivate":false,"strictDateValidation":false,"multiple":false,"unique":false},"conditional":{"show":null,"when":null,"eq":""},"allowCalculateOverride":false,"showCharCount":false,"showWordCount":false,"allowMultipleMasks":false,"inputType":"hidden","id":"e6z1qd9","description":"","addons":[]}]}]}