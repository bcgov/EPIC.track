"""adjusting actions

Revision ID: 1c3f745bb4c1
Revises: 6a36f4738b0f
Create Date: 2023-10-27 13:43:37.337973

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '1c3f745bb4c1'
down_revision = '6a36f4738b0f'
branch_labels = None
depends_on = None

actions = [
    "SetEventDate",
    "AddEvent",
    "SetPhasesStatus",
    "SetEventsStatus",
    "SetWorkState",
    "SetProjectStatus",
    "LockWorkStartDate",
    "SetWorkDecisionMaker",
    "AddPhase",
    "CreateWork"
]
def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.execute("TRUNCATE actions RESTART IDENTITY CASCADE")
    for action in actions:
        op.execute(f"INSERT INTO actions(name) VALUES('{action}')")
    op.execute("update work_phases  w set \"name\"  = p.name from phase_codes p  where p.id = w.phase_id")
    op.execute("update ministries set sort_order=sort_order+1")
    op.execute("insert into ministries(name,abbreviation,sort_order)values('Not Applicable','NA',1)")
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    pass
    # ### end Alembic commands ###
