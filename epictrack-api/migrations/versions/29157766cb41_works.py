"""works

Revision ID: 29157766cb41
Revises: 4ae18b9e8a76
Create Date: 2022-02-28 20:28:48.383527

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '29157766cb41'
down_revision = '4ae18b9e8a76'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    eoa_team = op.create_table('eoa_teams',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    positions = op.create_table('positions',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    roles = op.create_table('roles',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('work_status',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('status', sa.String(length=255), nullable=False),
    sa.Column('created_at', sa.DateTime(), server_default=sa.text('now()'), nullable=True),
    sa.Column('updated_at', sa.DateTime(), nullable=True),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('staffs',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('name', sa.String(), nullable=False),
    sa.Column('phone', sa.String(), nullable=False),
    sa.Column('email', sa.String(), nullable=False),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('position_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['position_id'], ['positions.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('works',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('title', sa.String(length=80), nullable=False),
    sa.Column('short_description', sa.String(length=255), nullable=True),
    sa.Column('long_description', sa.Text(), nullable=True),
    sa.Column('is_pecp_required', sa.Boolean(), nullable=True),
    sa.Column('is_cac_recommended', sa.Boolean(), nullable=True),
    sa.Column('is_active', sa.Boolean(), nullable=True),
    sa.Column('is_completed', sa.Boolean(), nullable=True),
    sa.Column('work_status_notes', sa.Text(), nullable=True),
    sa.Column('work_short_status', sa.String(length=255), nullable=True),
    sa.Column('work_status_stoplight', sa.Enum('RED', 'YELLOW', 'GREEN', name='workstatusstoplightenum'), nullable=True),
    sa.Column('start_date', sa.DateTime(), nullable=True),
    sa.Column('anticipated_decision_date', sa.DateTime(), nullable=True),
    sa.Column('decision_date', sa.DateTime(), nullable=True),
    sa.Column('project_id', sa.Integer(), nullable=False),
    sa.Column('ministry_id', sa.Integer(), nullable=False),
    sa.Column('ea_act_id', sa.Integer(), nullable=False),
    sa.Column('eoa_team_id', sa.Integer(), nullable=False),
    sa.Column('federal_involvement_id', sa.Integer(), nullable=False),
    sa.Column('responsible_epd_id', sa.Integer(), nullable=False),
    sa.Column('work_lead_id', sa.Integer(), nullable=False),
    sa.Column('work_type_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['ea_act_id'], ['ea_acts.id'], ),
    sa.ForeignKeyConstraint(['eoa_team_id'], ['eoa_teams.id'], ),
    sa.ForeignKeyConstraint(['federal_involvement_id'], ['federal_involvements.id'], ),
    sa.ForeignKeyConstraint(['ministry_id'], ['ministries.id'], ),
    sa.ForeignKeyConstraint(['project_id'], ['projects.id'], ),
    sa.ForeignKeyConstraint(['responsible_epd_id'], ['staffs.id'], ),
    sa.ForeignKeyConstraint(['work_lead_id'], ['staffs.id'], ),
    sa.ForeignKeyConstraint(['work_type_id'], ['work_types.id'], ),
    sa.PrimaryKeyConstraint('id')
    )
    op.create_table('staff_work_roles',
    sa.Column('id', sa.Integer(), autoincrement=True, nullable=False),
    sa.Column('work_id', sa.Integer(), nullable=False),
    sa.Column('role_id', sa.Integer(), nullable=False),
    sa.Column('staff_id', sa.Integer(), nullable=False),
    sa.ForeignKeyConstraint(['role_id'], ['roles.id'], ),
    sa.ForeignKeyConstraint(['staff_id'], ['staffs.id'], ),
    sa.ForeignKeyConstraint(['work_id'], ['works.id'], ),
    sa.PrimaryKeyConstraint('id')
    )

    op.bulk_insert(eoa_team, [{
            "name" : "CIAR"
        },
        {
            "name" : "MMT"
        },
        {
            "name" : "O&G"
        },
        {
            "name" : "PIWWIM"
        },
        {
            "name" : "Other"
        }]
    )

    op.bulk_insert(positions, [
        {
            "name" : "Associate Deputy Minister"
        },
        {
            "name" : "ADM, EA Operations"
        },
        {
            "name" : "Executive Project Director"
        },
        {
            "name" : "Project Assessment Director"
        },
        {
            "name" : "Project Assessment Officer"
        },
        {
            "name" : "Project Analyst"
        },
        {
            "name" : "Other"
        }
    ])
    op.bulk_insert(roles, [
        {
            "name" : "Responsible EPD"
        },
        {
            "name" : "Project Lead"
        },
        {
            "name" : "Officer \/ Analyst"
        },
        {
            "name" : "FN CAART"
        },
        {
            "name" : "Other"
        }
    ])
        # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_table('staff_work_roles')
    op.drop_table('works')
    op.drop_table('staffs')
    op.drop_table('work_status')
    op.drop_table('roles')
    op.drop_table('positions')
    op.drop_table('eoa_teams')
    # ### end Alembic commands ###
